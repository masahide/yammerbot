yammerbot
=========

[![CircleCI](https://circleci.com/gh/masahide/yammerbot.svg?style=svg)](https://circleci.com/gh/masahide/yammerbot)

yammer メンショングループを作りメンバーを事前に登録しておいて、
メンショングループ名を指定することで指定のスレにメンションを貼ることができます。


## 使い方

### 【 メンショングループへのユーザーの追加】
本文に「%グループ名」と「追加」という文字列と
追加したいユーザーのメンションを並べて、botアカウントにcc（メンションを飛ばす)する

例えば、以下のような本文で
botにccを入れて送信する
```
%hoge_tearm に以下のメンバーを追加
@user1 @user2 … （改行やスペースや文字列など途中に入っても良いのでとにかく並べれば良い）
```

* グループ名は自由に付けれます「%」の後ろに適当な名前をつけてください


### 【 メンションの貼り方】
メンションを貼りたいスレにbotを招待した上で、
本文に「%グループ名」と「メンション」という文字列を記載してbotアカウントにcc（メンションを飛ばす)する
本文例：
```
%hoge_tearm にメンション
```
bot 宛てccを入れて送信


### 【 メンショングループからユーザーの削除】
本文に「%グループ名」と「削除」という文字列と
削除したいユーザーのメンションを並べて、botアカウントにcc（メンションを飛ばす)する

### 【 メンショングループのユーザー表示】
本文に「%グループ名」と「表示」という文字列を記載し、botアカウントにcc（メンションを飛ばす)する


### 【グループ全部表示】
「メンションリスト」もしくは「全部表示」と記載し
botアカウントにcc（メンションを飛ばす)する
本文例：
```
全部表示
```

### 【グループ削除】

「グループ削除」 という単語とグループ名を記載し
botアカウントにcc（メンションを飛ばす)する
本文例：
```
%hoge グループ削除してください
```

### 【グループ名リネーム】

変更前グループ名と変更後グループの順で記載して、「変更」もしくは「リネーム」の単語を記載し
botアカウントにcc（メンションを飛ばす)する
本文例：
```
%test を %hoge に変更してください
```

### 【グループからメンバーをこっそり削除する方法】
1. botとのPMを作る
2. '%<グループ名> @<削除したいメンバー> 削除' と入力
3. CCから削除したいメンバを × アイコンをクリックして消す
4. bot をCCに追加
5. "投稿する" 
(追加にも使える)



## 設置方法


1. https://github.com/masahide/yammerbot/releases から環境にあったバイナリをダウンロードして展開する
2. 設定ファイルファイル`cache.json`にyammer apiキーを記載して保存する
3. 設定ファイルファイル`cache.json`に書き込み権限を与える
4. `./yammerbot` を起動する

* cache.jsonの設定は以下のような形
```
{
"AccessToken":"****************************************************************",
"DocomoAPIKey":"****************************************************************"
}

```
* Docomo雑談APIキーがあればDocomoAPIKeyも設定する（なければ省略可能)

